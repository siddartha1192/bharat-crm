# =============================================================================
# BHARAT CRM - STATELESS ARCHITECTURE ENVIRONMENT CONFIGURATION
# =============================================================================
#
# Copy this file to .env before deployment:
#   cp .env.stateless.example .env
#
# Architecture: Hostinger VPS + DigitalOcean Managed PostgreSQL
#
# =============================================================================

# =============================================================================
# STEP 1: DOMAIN CONFIGURATION (REQUIRED)
# =============================================================================
DOMAIN=yourdomain.com
FRONTEND_URL=https://yourdomain.com
# IMPORTANT: VITE_API_URL must include /api suffix for frontend API calls
VITE_API_URL=https://yourdomain.com/api

# =============================================================================
# STEP 2: DIGITALOCEAN DATABASE (REQUIRED)
# =============================================================================
# Get from: DigitalOcean Dashboard > Databases > Connection Details > Connection String
#
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?sslmode=require
DATABASE_URL=postgresql://doadmin:YOUR_PASSWORD@db-postgresql-xxx-do-user-xxx-0.db.ondigitalocean.com:25060/defaultdb?sslmode=require

# =============================================================================
# STEP 3: SECURITY KEYS (REQUIRED)
# =============================================================================
# Generate with: openssl rand -hex 32
JWT_SECRET=your-64-character-jwt-secret-generate-with-openssl-rand-hex-32
JWT_REFRESH_SECRET=your-64-character-refresh-secret-different-from-above

# IMPORTANT: Never change this after initial setup - it encrypts OAuth tokens
# Generate with: openssl rand -hex 16
ENCRYPTION_KEY=your-32-character-encryption-key

# =============================================================================
# STEP 4: OPENAI API (REQUIRED for AI features)
# =============================================================================
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_MODEL=gpt-4o-mini
EMBEDDING_MODEL=text-embedding-3-small
ENABLE_AI_FEATURE=true

# =============================================================================
# STEP 5: WHATSAPP BUSINESS API (REQUIRED for WhatsApp)
# =============================================================================
# Get from: https://business.facebook.com > WhatsApp Manager > API Setup
WHATSAPP_API_TOKEN=your-whatsapp-api-token
WHATSAPP_PHONE_ID=your-phone-number-id
WHATSAPP_BUSINESS_ACCOUNT_ID=your-business-account-id
WHATSAPP_WEBHOOK_VERIFY_TOKEN=any-random-string-you-choose
WHATSAPP_AI_MODEL=gpt-4o-mini
WHATSAPP_AI_TEMPERATURE=0.3

# =============================================================================
# STEP 6: GOOGLE OAUTH (REQUIRED for Google Login & Calendar)
# =============================================================================
# Get from: https://console.cloud.google.com > APIs & Services > Credentials
GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-client-secret
GOOGLE_REDIRECT_URI=https://yourdomain.com/api/calendar/google/callback
GOOGLE_AUTH_REDIRECT_URI=https://yourdomain.com/api/auth/google/callback

# =============================================================================
# STEP 7: GMAIL CONFIGURATION (REQUIRED for sending emails)
# =============================================================================
# For Gmail OAuth2:
# 1. Go to https://developers.google.com/oauthplayground
# 2. Authorize Gmail API scopes
# 3. Exchange authorization code for tokens
# 4. Copy refresh token
GMAIL_USER=your-email@gmail.com
GMAIL_REFRESH_TOKEN=your-gmail-refresh-token
GMAIL_REDIRECT_URI=https://developers.google.com/oauthplayground

# =============================================================================
# STEP 8: DIGITALOCEAN SPACES / S3 STORAGE (REQUIRED for stateless)
# =============================================================================
# DigitalOcean Spaces provides S3-compatible object storage for files.
# This enables stateless app servers - files are stored in the cloud.
#
# Setup steps:
# 1. Go to DigitalOcean > Spaces > Create a Space
# 2. Choose a datacenter region (e.g., nyc3, sgp1, fra1)
# 3. Name your Space (e.g., crm-uploads)
# 4. Go to API > Spaces Keys > Generate New Key
# 5. Copy the Access Key and Secret Key
#
S3_ENDPOINT=https://nyc3.digitaloceanspaces.com
S3_BUCKET=your-space-name
S3_ACCESS_KEY=your-spaces-access-key
S3_SECRET_KEY=your-spaces-secret-key
S3_REGION=nyc3

# Optional: CDN URL for faster file delivery
# Enable CDN on your Space, then use this URL format:
# S3_CDN_URL=https://your-space-name.nyc3.cdn.digitaloceanspaces.com

# =============================================================================
# STEP 9: QDRANT VECTOR DATABASE
# =============================================================================
# The worker container runs Qdrant internally - no configuration needed
# App servers connect to worker:6333 automatically
QDRANT_API_KEY=
VECTOR_COLLECTION_NAME=bharat_crm_knowledge

# =============================================================================
# STEP 11: TWILIO (OPTIONAL - for voice calls)
# =============================================================================
# Get from: https://console.twilio.com
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# =============================================================================
# STEP 12: COMPANY BRANDING
# =============================================================================
COMPANY_NAME=Your Company Name
OWNER_EMAIL=admin@yourdomain.com

# =============================================================================
# STEP 13: WORKER SETTINGS (Optional - defaults are fine)
# =============================================================================
# Campaign processing batch size
CAMPAIGN_BATCH_SIZE=100
CAMPAIGN_BATCH_DELAY=5000

# Scheduler intervals (in seconds/minutes)
CALL_SCHEDULER_INTERVAL=30
LEAD_REMINDER_INTERVAL=60
