# =============================================================================
# BHARAT CRM - STATELESS ARCHITECTURE ENVIRONMENT CONFIGURATION
# =============================================================================
#
# Copy this file to .env and configure all values before deployment.
#
# IMPORTANT: Never commit the actual .env file to version control!
#
# =============================================================================

# -----------------------------------------------------------------------------
# DATABASE (DigitalOcean Managed PostgreSQL)
# -----------------------------------------------------------------------------
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?sslmode=require
# Get this from DigitalOcean Database Dashboard > Connection Details
DATABASE_URL=postgresql://doadmin:YOUR_PASSWORD@your-db-cluster-do-user-xxxxx-0.db.ondigitalocean.com:25060/bharat_crm?sslmode=require

# -----------------------------------------------------------------------------
# REDIS
# -----------------------------------------------------------------------------
# For Docker Compose deployment, use the container name
REDIS_URL=redis://redis:6379
REDIS_HOST=redis
REDIS_PORT=6379

# For DigitalOcean Managed Redis (optional):
# REDIS_URL=rediss://default:YOUR_PASSWORD@your-redis-xxxxx.db.ondigitalocean.com:25061

# -----------------------------------------------------------------------------
# JWT AUTHENTICATION
# -----------------------------------------------------------------------------
# Generate with: openssl rand -hex 64
JWT_SECRET=your-super-secret-jwt-key-minimum-64-characters-long-for-security
JWT_REFRESH_SECRET=your-super-secret-refresh-key-minimum-64-characters-long
JWT_EXPIRES_IN=7d

# -----------------------------------------------------------------------------
# ENCRYPTION
# -----------------------------------------------------------------------------
# CRITICAL: This key encrypts OAuth tokens. NEVER change after initial setup!
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=your-32-byte-hex-encryption-key-never-change-this-value

# -----------------------------------------------------------------------------
# DIGITALOCEAN SPACES (S3-Compatible Storage)
# -----------------------------------------------------------------------------
# Get from DigitalOcean Dashboard > Spaces > API Keys
S3_ENDPOINT=https://nyc3.digitaloceanspaces.com
S3_BUCKET=your-crm-bucket-name
S3_ACCESS_KEY=your-spaces-access-key
S3_SECRET_KEY=your-spaces-secret-key
S3_REGION=nyc3

# CDN URL (optional, for faster file delivery)
S3_CDN_URL=https://your-crm-bucket-name.nyc3.cdn.digitaloceanspaces.com

# -----------------------------------------------------------------------------
# VECTOR DATABASE (Qdrant)
# -----------------------------------------------------------------------------
# For Docker deployment (connects to worker container):
QDRANT_URL=http://worker:6333
QDRANT_API_KEY=

# Collection settings
VECTOR_COLLECTION_NAME=bharat_crm_knowledge
EMBEDDING_MODEL=text-embedding-3-small

# -----------------------------------------------------------------------------
# OPENAI / AI SERVICES
# -----------------------------------------------------------------------------
OPENAI_API_KEY=sk-your-openai-api-key

# -----------------------------------------------------------------------------
# WHATSAPP BUSINESS API
# -----------------------------------------------------------------------------
# Get from Meta Business Suite > WhatsApp > API Setup
WHATSAPP_API_TOKEN=your-whatsapp-api-token
WHATSAPP_PHONE_ID=your-phone-number-id
WHATSAPP_BUSINESS_ACCOUNT_ID=your-business-account-id
WHATSAPP_WEBHOOK_VERIFY_TOKEN=your-custom-webhook-verify-token

# -----------------------------------------------------------------------------
# GOOGLE OAUTH (Calendar, Gmail Integration)
# -----------------------------------------------------------------------------
# Get from Google Cloud Console > APIs & Services > Credentials
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=https://yourdomain.com/api/calendar/auth/callback

# -----------------------------------------------------------------------------
# EMAIL (SMTP)
# -----------------------------------------------------------------------------
# For Gmail:
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-app-specific-password
EMAIL_FROM=Bharat CRM <your-email@gmail.com>

# For other providers:
# EMAIL_HOST=smtp.sendgrid.net
# EMAIL_PORT=587
# EMAIL_USER=apikey
# EMAIL_PASS=SG.your-sendgrid-api-key

# -----------------------------------------------------------------------------
# TWILIO (Voice Calls)
# -----------------------------------------------------------------------------
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# -----------------------------------------------------------------------------
# APPLICATION SETTINGS
# -----------------------------------------------------------------------------
NODE_ENV=production
PORT=3001

# Your domain (used for generating links, OAuth callbacks, etc.)
FRONTEND_URL=https://yourdomain.com
BACKEND_URL=https://yourdomain.com/api

# Company branding
COMPANY_NAME=Your Company Name
COMPANY_OWNER_EMAIL=admin@yourdomain.com

# -----------------------------------------------------------------------------
# WORKER SETTINGS
# -----------------------------------------------------------------------------
# Campaign processing
CAMPAIGN_BATCH_SIZE=100
CAMPAIGN_BATCH_DELAY=5000

# Scheduler intervals
CALL_SCHEDULER_INTERVAL=30
LEAD_REMINDER_INTERVAL=60

# -----------------------------------------------------------------------------
# SSL/TLS (Let's Encrypt)
# -----------------------------------------------------------------------------
SSL_EMAIL=admin@yourdomain.com
DOMAIN=yourdomain.com

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FORMAT=json

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------
RATE_LIMIT_WINDOW=60000
RATE_LIMIT_MAX=100
